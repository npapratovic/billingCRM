<!-- Main content -->
<ul class="breadcrumb">
    <li><a href="<?php echo URL::route('getDashboard'); ?>"><i class="fa fa-home"></i> Početna</a></li>
    <li><a href="<?php echo URL::route('ClientIndex'); ?>">Pregled svih klijenata</a></li>
    <li class="active">Dodaj klijenta</li>
</ul>
<div class="panel-heading">
	<div class="row">
	    <div class="col-md-10">
    		<h4>Unos novog klijenta</h4>
    	</div>
    	<div class="col-md-2">
      		<a href="<?php echo URL::route('ClientIndex'); ?>">
                <button class="btn btn-default btn-md pull-right"><i class="fa fa-caret-square-o-left"></i> Povratak</button>
            </a> 
    	</div>
    </div>
</div>
<div class="panel-body">
	<div class="row">
		<?php echo Form::open(array('route' => $postRoute, 'role' => 'form', 'class' => 'form-horizontal', 'autocomplete' => 'off', 'files' => false)); ?>

	    <div class="col-md-5"> 
                <div class="row">
                    <div class="col-md-8">
                        <div class="form-group">  
                            <label for="company_name">Naziv</label>
                            <?php echo Form::text('company_name', isset($entry->company_name) ? $entry->company_name : null, ['class' => 'form-control', 'id' => 'company_name', 'placeholder' => 'Popuniti samo za pravne osobe']); ?>

                            <small class="text-danger"><?php echo $errors->first('company_name'); ?></small>
                        </div>
                    </div>
                    <div class="col-md-1"></div>
                    <div class="col-md-3">
                        <div class="form-group">  
                            <label for="client_type">Tip djelatnosti</label>
                            <?php echo Form::select('client_type', array('d.o.o.' => 'd.o.o.', 'obrt' => 'obrt', 'j.d.o.o.' => 'j.d.o.o.', 'fiz. osoba' => 'fiz. osoba', 'bez oznake' => 'bez oznake', 'udruga' => 'udruga', 'OPG' => 'OPG', 'ustanova' => 'ustanova', 'd.d.' => 'd.d.', 'k.d.' => 'k.d.', 'DŠR' => 'DŠR', 'zadruga' => 'zadruga'), 'bez oznake', array('class'=>'form-control','style'=>'' )); ?>

                            <small class="text-danger"><?php echo $errors->first('client_type'); ?></small>
                        </div>  
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">  
                            <label for="oib">OIB</label>
                            <?php echo Form::text('oib', isset($entry->oib) ? $entry->oib : null, ['class' => 'form-control', 'id' => 'oib', 'placeholder' => 'Popuniti samo za pravne osobe']); ?>

                            <small class="text-danger"><?php echo $errors->first('oib'); ?></small>
                        </div>
                    </div> 
                </div>
                <div class="row">
                    <div class="col-md-5">
                        <div class="form-group">  
                            <label for="first_name">Ime klijenta</label>
                            <?php echo Form::text('first_name', isset($entry->first_name) ? $entry->first_name : null, ['class' => 'form-control', 'id' => 'first_name', 'placeholder' => '']); ?>

                            <small class="text-danger"><?php echo $errors->first('first_name'); ?></small>
                        </div>
                    </div>
                    <div class="col-md-1"></div>
                    <div class="col-md-6">
                        <div class="form-group">  
                            <label for="last_name">Prezime klijenta</label>
                            <?php echo Form::text('last_name', isset($entry->last_name) ? $entry->last_name : null, ['class' => 'form-control', 'id' => 'last_name', 'placeholder' => '']); ?>

                            <small class="text-danger"><?php echo $errors->first('last_name'); ?></small>
                        </div>   
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4"> 
                        <div class="form-group">  
                            <label for="address">Adresa</label>  
                            <?php echo Form::text('address', isset($entry->address) ? $entry->address : null, ['class' => 'form-control', 'id' => 'address', 'placeholder' => '']); ?>

                            <small class="text-danger"><?php echo $errors->first('address'); ?></small>
                        </div> 
                    </div>
                    <div class="col-md-1"></div>
                    <div class="col-md-3"> 
                        <div class="form-group">  
                            <label for="mjesto">Mjesto</label>  
                            <?php echo Form::text('mjesto', isset($entry->mjesto) ? $entry->mjesto : null, ['class' => 'form-control', 'id' => 'mjesto', 'placeholder' => '']); ?>

                            <small class="text-danger"><?php echo $errors->first('mjesto'); ?></small>
                        </div> 
                    </div>
                    <div class="col-md-1">
                    </div>
                    <div class="col-md-3"> 
                        <div class="form-group">  
                            <label for="zip">Poštanski broj</label>  
                            <?php echo Form::text('zip', isset($entry->zip) ? $entry->zip : null, ['class' => 'form-control', 'id' => 'zip', 'placeholder' => '']); ?>

                            <small class="text-danger"><?php echo $errors->first('zip'); ?></small>
                        </div> 
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">  
                            <label for="country">Zemlja</label>
                            <?php echo Form::text('country', isset($entry->country) ? $entry->country : null, ['class' => 'form-control', 'id' => 'country', 'placeholder' => '']); ?>

                            <small class="text-danger"><?php echo $errors->first('country'); ?></small>
                        </div>
                    </div> 
                </div>

                <div class="row">
                    <div class="col-md-4"> 
                        <div class="form-group">  
                            <label for="phone">Telefon</label>  
                            <?php echo Form::text('phone', isset($entry->phone) ? $entry->phone : null, ['class' => 'form-control', 'id' => 'phone', 'placeholder' => '']); ?>

                            <small class="text-danger"><?php echo $errors->first('phone'); ?></small>
                        </div> 
                    </div>
                    <div class="col-md-1"></div>
                    <div class="col-md-3"> 
                        <div class="form-group">  
                            <label for="fax">Fax</label>  
                            <?php echo Form::text('fax', isset($entry->fax) ? $entry->fax : null, ['class' => 'form-control', 'id' => 'fax', 'placeholder' => '']); ?>

                            <small class="text-danger"><?php echo $errors->first('fax'); ?></small>
                        </div> 
                    </div>
                    <div class="col-md-1">
                    </div>
                    <div class="col-md-3"> 
                        <div class="form-group">  
                            <label for="mobile">Mobitel</label>  
                            <?php echo Form::text('mobile', isset($entry->mobile) ? $entry->mobile : null, ['class' => 'form-control', 'id' => 'mobile', 'placeholder' => '']); ?>

                            <small class="text-danger"><?php echo $errors->first('mobile'); ?></small>
                        </div> 
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4"> 
                        <div class="form-group">  
                            <label for="email">E-mail adresa</label>  
                            <?php echo Form::text('email', isset($entry->email) ? $entry->email : null, ['class' => 'form-control', 'id' => 'email', 'placeholder' => '']); ?>

                            <small class="text-danger"><?php echo $errors->first('email'); ?></small>
                        </div> 
                    </div>
                    <div class="col-md-1"></div>
                    <div class="col-md-3"> 
                        <div class="form-group">  
                            <label for="web">Internet stranica</label>  
                            <?php echo Form::text('web', isset($entry->web) ? $entry->web : null, ['class' => 'form-control', 'id' => 'web', 'placeholder' => '']); ?>

                            <small class="text-danger"><?php echo $errors->first('web'); ?></small>
                        </div> 
                    </div>
                    <div class="col-md-1">
                    </div>
                    <div class="col-md-3"> 
                        <div class="form-group">  
                            <label for="iban">IBAN <span style="font-size: 10px;">(žiro račun)</span></label>  
                            <?php echo Form::text('iban', isset($entry->iban) ? $entry->iban : null, ['class' => 'form-control', 'id' => 'iban', 'placeholder' => '']); ?>

                            <small class="text-danger"><?php echo $errors->first('iban'); ?></small>
                        </div> 
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">  
                            <label for="note">Interna napomena <span style="font-size: 10px;">(vidljivo samo tebi)</span></label>
                            <?php echo Form::textarea('note', isset($entry->note) ? $entry->note : null, ['class' => 'form-control', 'id' => 'note', 'placeholder' => '']); ?>

                            <small class="text-danger"><?php echo $errors->first('note'); ?></small>
                        </div>
                    </div> 
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <?php echo Form::button('<i class="fa fa-floppy-o"></i>   ' . Lang::get('core.save'), array('type' => 'submit', 'class' => 'btn btn-info pull-right')); ?>

                    </div>
                </div>

                
	    </div>

	    <?php echo Form::close(); ?>


	    <div class="col-md-6 col-md-offset-1">
	    	    <table class="table table-hover" id="entries-list">
        <thead>
            <tr>
                <th>Naziv</th>
                <th>Adresa</th>
                <th>Kontakt</th>
                <th>OIB</th>
                <th>Akcija</th>
            </tr>
        </thead>
        <tbody>
             <?php if(count($entries['entries']) > 0): ?> 
                <?php foreach($entries['entries'] as $entry): ?>
                <tr>
                    <td><?php echo $entry->first_name; ?> <?php echo $entry->last_name; ?></td>
                    <td><?php echo $entry->address; ?>  </td>
                    <td><?php echo $entry->email; ?></td>
                    <td><?php echo $entry->oib; ?></td>

                    <td class="col-md-1">

                        <a href="<?php echo URL::route('ClientEdit', array('id' => $entry->id)); ?>">
                            <button class="btn btn-success btn-xs"><i class="fa fa-pencil"></i></button>
                        </a>
                        <button type="button" id="btn-delete-client-id-<?php echo $entry->id; ?>" class="btn btn-danger btn-xs" data-target="#delete-client-id-<?php echo $entry->id; ?>"><i class="fa fa-times"></i>
                        </button>
                    </td>
                </tr>
                <?php endforeach; ?> 
            <?php else: ?>
                <p>Nema niti jednog unešenog klijenta</p>
            <?php endif; ?>
        </tbody>
    </table>
	    </div>
    </div>
</div>

<?php if(count($entries['entries']) > 0): ?> 
    <?php foreach($entries['entries'] as $entry): ?>
    <!-- Modal <?php echo $entry->id; ?>-->
    <div class="modal fade" id="delete-client-id-<?php echo $entry->id; ?>" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Pozor!</h4>
                </div>
                <div class="modal-body">
                    <p>Želite li obrisati klijenta: <?php echo $entry->first_name; ?>?</p>
                </div>
                <div class="modal-footer">
                    <a href="<?php echo URL::route('ClientDestroy', array('id' => $entry->id)); ?>">
                        <button type="button" class="btn btn-default" data-ok="modal">U redu</button>
                    </a>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Odustani</button>
                </div>
            </div>
        </div>
    </div>
    <?php endforeach; ?>
<?php endif; ?> 
 
<script type="text/javascript">
	$(document).ready(function() {
	    $(":file").filestyle();
	    $('.editor').summernote({
	    	height: 200
	    });
    	$("#title").stringToSlug();

        <?php if(count($entries['entries']) > 0): ?> 
            <?php foreach($entries['entries'] as $entry): ?>
                $("#btn-delete-client-id-<?php echo $entry->id; ?>").click(function() { 
                    $('#delete-client-id-<?php echo $entry->id; ?>').modal('show');
                });
            <?php endforeach; ?>
        <?php endif; ?> 

    	 $('#entries-list').DataTable( 
        	{
            "language": {
                "url": "http://cdn.datatables.net/plug-ins/1.10.11/i18n/Croatian.json"
            }
        	})
	});
</script>
